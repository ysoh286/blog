import{a as A,t as B}from"./disclose-version.hD3RjQbW.js";import"./legacy.C6sgJd9a.js";import{s as e,f as J,c as t,r as a,n as F}from"./runtime.Bs2-O94s.js";import{h as o}from"./html.DBamY79b.js";const P={title:"i still don't know js: demystifying the 2012 wat video",date:"2024-07-28T18:00:08.000Z"};var W=B(`<p>For software engineers, you’ve most likely come across the popular <a href="https://www.destroyallsoftware.com/talks/wat" rel="nofollow">wat video</a>, which highlights some interesting behaviour of JavaScript (JS part starts at 1:24 - 4:00).</p> <p>I used to laugh at this and at the nonsense of it (the batman joke was gold), but wouldn’t it be good to
demystify what’s really going on and why do we have such behaviour?</p> <h3>Adding 2 empty arrays together:</h3> <p>The addition operator <code>+</code> will aim to either perform string concatentation OR numeric addition.</p> <pre class="language-undefined"><!></pre> <p>The two empty arrays will try to be converted to a primitive data type, which get converted to string, which evaluates to an empty string, thus concatenating 2 empty strings, gives an empty string.</p> <pre class="language-undefined"><!></pre> <h3>Adding <code>[] + &#123;&#125; = [object Object]</code></h3> <p>This returns <code>[object Object]</code>. Strangely enough, we generally see this output when an object is being converted into a primitive data type into a string.</p> <pre class="language-undefined"><!></pre> <p>Thus, when adding the two together:</p> <pre class="language-undefined"><!></pre> <h3>What about <code>&#123;&#125; + [] = 0</code>?</h3> <pre class="language-undefined"><!></pre> <p>This one is a strange one, but JS is interpreting the front <code>&#123;&#125;</code> as a empty block rather than an object.
With the empty block evaluated, this means it just leaves <code>+ []</code>, which gets converted to a primitive which is a string , then a number, giving us 0</p> <pre class="language-undefined"><!></pre> <h3><code>&#123;&#125; + &#123;&#125; = NaN</code></h3> <p>The first <code>&#123;&#125;</code> is just evaluated as an empty block, and thus ignored. Which leaves us with <code>+ &#123;&#125;</code>. Once again, the object gets converted to a primitive, which is a string, giving us <code>+ '[object Object]'</code>. Next, when we try to convert this to a number, it will return <code>NaN</code>.</p> <pre class="language-undefined"><!></pre> <h3>The Batman <code>NaN</code> explanation</h3> <pre class="language-undefined"><!></pre> <p>returns a string of <code>NaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN</code>.</p> <p>Let’s dissect the <code>"wat" - 1</code> part:</p> <pre class="language-undefined"><!></pre> <p>This will evaluate to NaN as trying to convert “wat” into a number will return NaN. Thus, adding numbers to NaN will still result in NaN.
The join operator will try convert this to a string, thus giving “NaN”.</p> <pre class="language-undefined"><!></pre> <p>From the spec, the + operator will try to convert left and right to a primitive (generally a string, or number), then try add the two if they conform to string or number. If both types are string, then string concatenation will occur. If both types are numbers, then numeric addition will occur.</p> <h3>Extras</h3> <p>Just some extra gotchas:</p> <p><code>1 &lt; 2 &lt; 3</code> returns <code>true</code> - which is okay, but what’s really happening?</p> <pre class="language-undefined"><!></pre> <p><code>3 &gt; 2 &gt; 1</code> gives <code>false</code> following the same thinking above, even though mathematically we know this should be <code>true</code>:</p> <pre class="language-undefined"><!></pre> <h3>References</h3> <ul><li><a href="https://tc39.es/ecma262/#sec-addition-operator-plus" rel="nofollow">ECMAScript spec</a></li> <li><a href="https://medium.com/dev-proto/why-gives-object-object-object-object-in-javascript-2f350b739cc9" rel="nofollow">Chidume Nnamdi’s blog post on why <code>&#123;&#125; + &#123;&#125;</code> returns [object Object]</a></li> <li><a href="https://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the" rel="nofollow">StackOverflow’s explanation on the video</a></li> <li><a href="https://www.destroyallsoftware.com/talks/wat" rel="nofollow">Wat video</a></li> <li>Kyle Simpson’s <a href="https://frontendmasters.com/courses/deep-javascript-v3/" rel="nofollow">Deep JavaScript Foundations</a> course on FrontEnd Masters</li></ul>`,1);function R(v){var N=W(),n=e(J(N),8),f=t(n);o(f,()=>`<code class="language-undefined">[] + []  // returns &quot;&quot;
</code>`),a(n);var r=e(n,4),w=t(r);o(w,()=>`<code class="language-undefined">[] + []
// = &quot;&quot; + &quot;&quot;
// = &quot;&quot;</code>`),a(r);var i=e(r,6),b=t(i);o(b,()=>'<code class="language-undefined">String(&#123;&#125;); // returns [object Object]</code>'),a(i);var s=e(i,4),y=t(s);o(y,()=>`<code class="language-undefined">[] + &#123;&#125;
// = &#39;&#39; + &#39;[object Object]&#39; // converted to string
// = &#39;[object Object]&#39;</code>`),a(s);var d=e(s,4),j=t(d);o(j,()=>'<code class="language-undefined">&#123;&#125; + [] // 0</code>'),a(d);var c=e(d,4),q=t(c);o(q,()=>`<code class="language-undefined">&#123;&#125; + []
// = + []
// = ToNumber(ToPrimitive([]))
// = ToNumber(&quot;&quot;)
// = 0</code>`),a(c);var l=e(c,6),_=t(l);o(_,()=>`<code class="language-undefined">&#123;&#125; + &#123;&#125;
// = + &#123;&#125;
// = ToNumber(ToPrimitive(&#123;&#125;))
// = ToNumber(&#39;[object Object]&#39;)
// = NaN // as the string cannot be converted to number</code>`),a(l);var u=e(l,4),T=t(u);o(T,()=>'<code class="language-undefined">Array(16).join(&quot;wat&quot; - 1);</code>'),a(u);var h=e(u,6),k=t(h);o(k,()=>`<code class="language-undefined">&quot;wat&quot; - 1
// = Number(&quot;wat&quot;) - 1
// = NaN - 1
// = NaN</code>`),a(h);var p=e(h,4),O=t(p);o(O,()=>`<code class="language-undefined">Array(16).join(&quot;wat&quot; - 1) + &quot; Batman!&quot;
// = Array(16).join(NaN) + &quot; Batman!&quot;
// = Array(16).join(&quot;NaN&quot;) + &quot; Batman!&quot;
// = &quot;NaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN&quot; + &quot; Batman!&quot;
// = &quot;NaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN Batman!&quot;</code>`),a(p);var g=e(p,10),S=t(g);o(S,()=>`<code class="language-undefined">1 &lt; 2 &lt; 3
// = (1 &lt; 2) &lt; 3
// = true &lt; 3 // converted to boolean, then to number
// = 1 &lt; 3
// = true</code>`),a(g);var m=e(g,4),x=t(m);o(x,()=>`<code class="language-undefined">3 &gt; 2 &gt; 1
// = (3 &gt; 2) &gt; 1
// = true &gt; 1 // boolean gets converted to number (true = 1, false = 0)
// = 1 &gt; 1
// = false</code>`),a(m),F(4),A(v,N)}export{R as default,P as metadata};
