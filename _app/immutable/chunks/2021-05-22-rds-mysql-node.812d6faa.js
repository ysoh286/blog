import{S as Sr,i as _r,s as Ar,k as r,r as s,a as f,l as i,m as u,u as l,h as t,c as d,p as c,b as n,D as o,n as Al}from"./index.dfe3f0e6.js";function Dr(sr){let L,Ko,It,ue,$o,Nt,fe,Xo,Qt,de,Zo,Wt,ce,ea,Ot,pe,ta,jt,v,oa,j,aa,sa,B,la,na,Bt,he,ra,Ht,me,ia,xt,ye,ua,Yt,Ee,ge,fa,zt,m,Fe,da,ca,Je,pa,ha,Ke,ma,ya,$e,Ea,Gt,ve,va,Vt,w,wa,H,ba,Sa,Xe,_a,Aa,Ut,R,Da,x,La,Ra,gt,we,Ze,Ca,Ft,be,qa,Jt,Se,Ta,Kt,_e,ka,$t,Ae,Ma,Xt,De,et,Pa,Zt,Le,Ia,eo,C,Na,Y,Qa,Wa,to,Re,Oa,oo,q,ja,tt,Ba,Ha,ao,Ce,xa,so,qe,Ya,lo,z,lr=`<code class="language-undefined">CREATE TABLE sales (
 productId varchar(20),
 desc varchar(50),
 volume int,
 date datetime
);</code>`,no,Te,za,ro,ke,Ga,io,Me,Va,uo,G,nr=`<code class="language-undefined">&quot;productId&quot;,&quot;desc&quot;,&quot;volume&quot;,&quot;date&quot;
&quot;001&quot;,&quot;banana&quot;,&quot;10&quot;,&quot;2021-04-01&quot;
&quot;002&quot;,&quot;strawberry&quot;,&quot;15&quot;,&quot;2021-05-01&quot;
...</code>`,fo,T,Ua,ot,ga,Fa,co,V,rr=`<code class="language-undefined">LOAD DATA LOCAL INFILE &#96;/filepath/sales.csv&#96;
INTO TABLE sales
FILEDS TERMINATED BY &#39;,&#39;
ENCLOSED BY &#39;&quot;&#39;
LINES TERMINATED BY &#39;&#92;n&#39;
IGNORE 1 ROWS;</code>`,po,Pe,Ja,ho,k,Ka,at,$a,Xa,mo,Ie,Za,yo,Ne,es,Eo,Qe,ts,vo,M,os,U,as,ss,wo,P,ls,st,ns,rs,bo,b,is,lt,us,fs,nt,ds,cs,So,y,ps,rt,hs,ms,it,ys,Es,ut,vs,ws,_o,I,bs,ft,Ss,_s,Ao,g,ir=`<code class="language-undefined">RDS_HOSTNAME=hostname_of_db
RDS_USERNAME=username
RDS_PASSWORD=password
RDS_PORT=port
RDS_DATABASE_NAME=sys</code>`,Do,D,dt,As,Ds,ct,Ls,Rs,Lo,We,Cs,Ro,S,qs,pt,Ts,ks,ht,Ms,Ps,Co,Oe,Is,qo,F,ur=`<code class="language-undefined">const mysql = require(&quot;mysql&quot;);

require(&quot;dotenv&quot;).config();

const connection = mysql.createConnection(&#123;
 host : ({}).RDS_HOSTNAME,
 user : ({}).RDS_USERNAME,
 password : ({}).RDS_PASSWORD,
 port : ({}).RDS_PORT,
 database : ({}).RDS_DATABASE_NAME,
&#125;);

// test connection to database
const testConnection = () =&gt; &#123;
 connection.connect((err) =&gt; &#123;
 if(err) return console.error(&quot;Failed to connect to database.&quot;);
 &#125;);
 console.log(&quot;Success! Connected to database&quot;);
&#125;;

testConnection();
</code>`,To,N,Ns,mt,Qs,Ws,ko,_,Os,yt,js,Bs,J,Hs,xs,Mo,A,Ys,Et,zs,Gs,vt,Vs,Us,Po,K,fr=`<code class="language-undefined">const util = require(&quot;util&quot;);
connection.query = util.promisify(connection.query).bind(connection);

const query = (sql, args) =&gt; connection.query(sql, args);

// query for some sales data
const salesQuery = &#96;SELECT * from sales LIMIT 10;&#96;;
const sales = await query(salesQuery);
console.log(&#96;10 items returned from sales&#96;, JSON.stringify(sales));
</code>`,Io,$,wt,gs,Fs,No,E,Js,bt,Ks,$s,St,Xs,Zs,_t,el,tl,Qo,X,dr=`<code class="language-undefined">const id = 123;
const salesQuery = &#96;SELECT * from sales
 WHERE id = $&#123;id&#125;; &#96;;

const sales = await query(salesQuery);</code>`,Wo,je,ol,Oo,Z,cr=`<code class="language-undefined">const id = 123;
const salesQuery = &#96;SELECT * from sales
 WHERE id = ?&#96;;
const sales = await query(salesQuery, [id]);
</code>`,jo,Be,al,Bo,He,sl,Ho,p,At,ee,ll,nl,Dt,te,rl,il,Lt,oe,ul,fl,Rt,ae,dl,cl,Ct,se,pl,hl,qt,le,ml,yl,Tt,ne,El,vl,kt,re,wl,bl,Mt,ie,Sl;return{c(){L=r("p"),Ko=s("Recently, I’ve been looking at RDS and trying to connect up to Node.js."),It=f(),ue=r("p"),$o=s("After spending 3 hours debugging, getting the same error and going round in circles, the solution was just a missing parameter - which pushes me to write about it!"),Nt=f(),fe=r("h2"),Xo=s("Problem:"),Qt=f(),de=r("p"),Zo=s("Connecting to an AWS RDS DB instance with Node.js"),Wt=f(),ce=r("h3"),ea=s("What is RDS?"),Ot=f(),pe=r("p"),ta=s("RDS (Relational database service) is Amazon’s version of a relational SQL database. AWS takes care of all the hardware and within a few clicks, you can set up a database in the cloud that you can access in minutes. You can choose one of the 6 database engines it supports - MySQL, Aurora, PostgreSQL, MariaDB, Oracle, Microsoft SQL Server."),jt=f(),v=r("p"),oa=s("A more detailed overview with its pros and cons can be found "),j=r("a"),aa=s("here"),sa=s(" and on the "),B=r("a"),la=s("AWS website"),na=s("."),Bt=f(),he=r("p"),ra=s("How do you know if RDS is for you? As always with any AWS tool or service, it all depends on your use case. Sometimes you just need to try it out and see."),Ht=f(),me=r("h2"),ia=s("Approach:"),xt=f(),ye=r("p"),ua=s("We wanted to connect the DB with a Node.js backend to get data out of the database and do transformations in the backend before sending data across (or send it as-is from the database)."),Yt=f(),Ee=r("p"),ge=r("strong"),fa=s("Steps:"),zt=f(),m=r("ul"),Fe=r("li"),da=s("Create an RDS DB instance in AWS"),ca=f(),Je=r("li"),pa=s("Create a connection using MySQL Workbench"),ha=f(),Ke=r("li"),ma=s("Load some data (in CSV) into the database"),ya=f(),$e=r("li"),Ea=s("Create and connect up to DB instance through Node.js and run some queries"),Gt=f(),ve=r("h3"),va=s("Create RDS DB instance in AWS"),Vt=f(),w=r("p"),wa=s("You can do this through the console - there are a lot of resources for this available. I followed this "),H=r("a"),ba=s("tutorial"),Sa=s(" using the "),Xe=r("code"),_a=s("Easy Create"),Aa=s(" option, and an Aurora (or a MySQL) engine."),Ut=f(),R=r("p"),Da=s(`Make sure you have your username and password - you’ll need this to establish the connection to your database.
If you forget your password, you can reset it by following the steps written `),x=r("a"),La=s("here"),Ra=s("."),gt=f(),we=r("p"),Ze=r("em"),Ca=s("RDS Console > Databases > select the instance you want to Modify > New Master Password > Apply Immediately"),Ft=f(),be=r("p"),qa=s("You can find more details about the database on the Configuration tab. These details will come in handy later on."),Jt=f(),Se=r("p"),Ta=s("To make sure you can access it, check the settings of the security groups and VPC."),Kt=f(),_e=r("h3"),ka=s("Create a connection using MySQL Workbench"),$t=f(),Ae=r("p"),Ma=s("What is MySQL Workbench?"),Xt=f(),De=r("blockquote"),et=r("p"),Pa=s("MySQL Workbench is a unified visual tool for database architects, developers, and DBAs. MySQL Workbench provides data modelling, SQL development, and comprehensive administration tools for server configuration, user administration, backup, and much more. (from MySQL)"),Zt=f(),Le=r("p"),Ia=s("In summary, it’s a programme that can help you do operations on your database."),eo=f(),C=r("p"),Na=s("It’s free and you can download it "),Y=r("a"),Qa=s("here"),Wa=s(". Their interface was easy enough to navigate through, and you can create tables, insert data in and run queries through the GUI."),to=f(),Re=r("p"),Oa=s(`First, install the programme. Once installed, set up the connection to the DB.
To do this, fill in the details of the hostname, username, password, and port number. All these can be found on the AWS console (remember the Configuration tab?).`),oo=f(),q=r("p"),ja=s("Press "),tt=r("code"),Ba=s("Test Connection"),Ha=s(" to test the connection - if it’s all good you’re all ready to go."),ao=f(),Ce=r("p"),xa=s("If it’s being denied, check your security and authorization - it might be that you’ll need to set up an inbound connection on the security group to allow access as mentioned above."),so=f(),qe=r("p"),Ya=s("You can create tables manually through the GUI, or write SQL statements. An example is provided below:"),lo=f(),z=r("pre"),no=f(),Te=r("h3"),za=s("Load some data into the database"),ro=f(),ke=r("p"),Ga=s("This is just one way of loading some data into the database - I had a few CSV files."),io=f(),Me=r("p"),Va=s("Here’s the format of the CSV file…"),uo=f(),G=r("pre"),fo=f(),T=r("p"),Ua=s("All I had to do was run this command and it would load the data in (replace "),ot=r("code"),ga=s("filepath"),Fa=s(" with the file path to your file)."),co=f(),V=r("pre"),po=f(),Pe=r("p"),Ja=s(`It may take a few seconds depending on how much data you’re loading in.
Make sure your DB is connected (or it will complain), and make sure the column names are in the same order as those defined in your table (otherwise, it will assign them in the wrong place). There probably are other more complex SQL statements to control this - so if you’re an SQL expert, you’ll be savvy enough to figure it out. :)`),ho=f(),k=r("p"),Ka=s("Another thing is if you are loading local files on your computer, you’ll need to add the "),at=r("code"),$a=s("OPT_LOCAL_INFILE=1"),Xa=s(" option to make sure Workbench locally connects to these files."),mo=f(),Ie=r("p"),Za=s("To do this, go back to the page where you set up the database connections > Manage Server Connections > Connection > Advanced."),yo=f(),Ne=r("p"),es=s("Now you’ve got some data in the database, it’s time to connect it up and access some data through Node.js!"),Eo=f(),Qe=r("h3"),ts=s("Connecting through Node.js"),vo=f(),M=r("p"),os=s("You can connect to RDS by establishing a MySQL connection through Node.js. To set up, AWS has some "),U=r("a"),as=s("instructions"),ss=s(" you can follow."),wo=f(),P=r("p"),ls=s("Below is a snippet from their tutorial which creates the connection and uses the "),st=r("code"),ns=s("mysql"),rs=s(" package."),bo=f(),b=r("p"),is=s("You can install this by running "),lt=r("code"),us=s("npm install mysql"),fs=s(" and using a local "),nt=r("code"),ds=s(".env"),cs=s(" file to store the hostname, username, password, port number and database name."),So=f(),y=r("p"),ps=s("The "),rt=r("code"),hs=s("dotenv"),ms=s(" package allows you to access environment variables from a local "),it=r("code"),ys=s(".env"),Es=s(" file. You will need to install this as well to use it via "),ut=r("code"),vs=s("npm install dotenv"),ws=s("."),_o=f(),I=r("p"),bs=s("Your "),ft=r("code"),Ss=s(".env"),_s=s(" file:"),Ao=f(),g=r("pre"),Do=f(),D=r("p"),dt=r("strong"),As=s("WARNING:"),Ds=s(" NEVER EVER EVER COMMIT THIS TO GIT as it contains sensitive information! Remember to check this is in the "),ct=r("code"),Ls=s(".gitignore"),Rs=s(" file if you are using git or any VCS. There are other secure ways of doing this (such as going through an IAM role)."),Lo=f(),We=r("p"),Cs=s("To be able to query, you’ll need to make sure you define the database name as well (otherwise you’ll get a database error)."),Ro=f(),S=r("p"),qs=s("Note if you did not set up a database name (or in the RDS console, the name is "),pt=r("code"),Ts=s("-"),ks=s("), the name is likely to be "),ht=r("code"),Ms=s("sys"),Ps=s(" or the parent of the tables when you view the database and its attributes in MySQL Workbench."),Co=f(),Oe=r("p"),Is=s("Node.js file connecting to RDS:"),qo=f(),F=r("pre"),To=f(),N=r("p"),Ns=s("The "),mt=r("code"),Qs=s("testConnection"),Ws=s(" function should be able to run and if it prints out the success message, it means you’ve connected!"),ko=f(),_=r("p"),Os=s("To query, there are a few gotchas - the "),yt=r("code"),js=s("mysql"),Bs=s(" package will need a few additional tweaks if you need to store your query results in a variable and do further transformations. There’s a very good doc about all the different ways and how to handle the "),J=r("a"),Hs=s("promises here"),xs=s(" and the explanation behind each one."),Mo=f(),A=r("p"),Ys=s("I prefer using "),Et=r("code"),zs=s("await / async"),Gs=s(" when handling promises. In short, we are changing "),vt=r("code"),Vs=s("connection.query"),Us=s(" to return a promise response so we can capture it and do further transformations if needed."),Po=f(),K=r("pre"),Io=f(),$=r("p"),wt=r("strong"),gs=s("NOTE:"),Fs=s(" If you need to pass arguments down to the SQL statement, do prepare them. Do NOT just insert the variables in."),No=f(),E=r("p"),Js=s("Incorrect / or prone to error (the reason is if "),bt=r("code"),Ks=s("id"),$s=s(" is another "),St=r("code"),Xs=s("SELECT"),Zs=s(" / "),_t=r("code"),el=s("UPDATE"),tl=s(" statement, you could end up introducing unintended side effects / running other queries to the database that you do not want happening!):"),Qo=f(),X=r("pre"),Wo=f(),je=r("p"),ol=s("Recommended (is to pass the arguments through / “prepare” the statement):"),Oo=f(),Z=r("pre"),jo=f(),Be=r("p"),al=s("And that’s it! Hopefully, you can start accessing your RDS DB through Node.js!"),Bo=f(),He=r("h2"),sl=s("References / Helpful resources"),Ho=f(),p=r("ul"),At=r("li"),ee=r("a"),ll=s("RDS - AWS"),nl=f(),Dt=r("li"),te=r("a"),rl=s("Pros and cons of RDS - Sara’s Analytics"),il=f(),Lt=r("li"),oe=r("a"),ul=s("Creating a MySQL DB instance and connecting to a database on a MySQL DB instance - AWS"),fl=f(),Rt=r("li"),ae=r("a"),dl=s("Reset RDS master password - AWS"),cl=f(),Ct=r("li"),se=r("a"),pl=s("MySQL Workbench - MySQL"),hl=f(),qt=r("li"),le=r("a"),ml=s("Executing a MySQL query in Node.js - Evert Pot"),yl=f(),Tt=r("li"),ne=r("a"),El=s("Adding an Amazon RDS DB instance to your Node.js application environment - AWS"),vl=f(),kt=r("li"),re=r("a"),wl=s("Node.js, MySQL and async/await - Michal Mecinski"),bl=f(),Mt=r("li"),ie=r("a"),Sl=s("Using AWS RDS with Node.js and Express.js tutorial - Stack Abuse"),this.h()},l(e){L=i(e,"P",{});var a=u(L);Ko=l(a,"Recently, I’ve been looking at RDS and trying to connect up to Node.js."),a.forEach(t),It=d(e),ue=i(e,"P",{});var Dl=u(ue);$o=l(Dl,"After spending 3 hours debugging, getting the same error and going round in circles, the solution was just a missing parameter - which pushes me to write about it!"),Dl.forEach(t),Nt=d(e),fe=i(e,"H2",{});var Ll=u(fe);Xo=l(Ll,"Problem:"),Ll.forEach(t),Qt=d(e),de=i(e,"P",{});var Rl=u(de);Zo=l(Rl,"Connecting to an AWS RDS DB instance with Node.js"),Rl.forEach(t),Wt=d(e),ce=i(e,"H3",{});var Cl=u(ce);ea=l(Cl,"What is RDS?"),Cl.forEach(t),Ot=d(e),pe=i(e,"P",{});var ql=u(pe);ta=l(ql,"RDS (Relational database service) is Amazon’s version of a relational SQL database. AWS takes care of all the hardware and within a few clicks, you can set up a database in the cloud that you can access in minutes. You can choose one of the 6 database engines it supports - MySQL, Aurora, PostgreSQL, MariaDB, Oracle, Microsoft SQL Server."),ql.forEach(t),jt=d(e),v=i(e,"P",{});var xe=u(v);oa=l(xe,"A more detailed overview with its pros and cons can be found "),j=i(xe,"A",{href:!0,rel:!0});var Tl=u(j);aa=l(Tl,"here"),Tl.forEach(t),sa=l(xe," and on the "),B=i(xe,"A",{href:!0,rel:!0});var kl=u(B);la=l(kl,"AWS website"),kl.forEach(t),na=l(xe,"."),xe.forEach(t),Bt=d(e),he=i(e,"P",{});var Ml=u(he);ra=l(Ml,"How do you know if RDS is for you? As always with any AWS tool or service, it all depends on your use case. Sometimes you just need to try it out and see."),Ml.forEach(t),Ht=d(e),me=i(e,"H2",{});var Pl=u(me);ia=l(Pl,"Approach:"),Pl.forEach(t),xt=d(e),ye=i(e,"P",{});var Il=u(ye);ua=l(Il,"We wanted to connect the DB with a Node.js backend to get data out of the database and do transformations in the backend before sending data across (or send it as-is from the database)."),Il.forEach(t),Yt=d(e),Ee=i(e,"P",{});var Nl=u(Ee);ge=i(Nl,"STRONG",{});var Ql=u(ge);fa=l(Ql,"Steps:"),Ql.forEach(t),Nl.forEach(t),zt=d(e),m=i(e,"UL",{});var Q=u(m);Fe=i(Q,"LI",{});var Wl=u(Fe);da=l(Wl,"Create an RDS DB instance in AWS"),Wl.forEach(t),ca=d(Q),Je=i(Q,"LI",{});var Ol=u(Je);pa=l(Ol,"Create a connection using MySQL Workbench"),Ol.forEach(t),ha=d(Q),Ke=i(Q,"LI",{});var jl=u(Ke);ma=l(jl,"Load some data (in CSV) into the database"),jl.forEach(t),ya=d(Q),$e=i(Q,"LI",{});var Bl=u($e);Ea=l(Bl,"Create and connect up to DB instance through Node.js and run some queries"),Bl.forEach(t),Q.forEach(t),Gt=d(e),ve=i(e,"H3",{});var Hl=u(ve);va=l(Hl,"Create RDS DB instance in AWS"),Hl.forEach(t),Vt=d(e),w=i(e,"P",{});var Ye=u(w);wa=l(Ye,"You can do this through the console - there are a lot of resources for this available. I followed this "),H=i(Ye,"A",{href:!0,rel:!0});var xl=u(H);ba=l(xl,"tutorial"),xl.forEach(t),Sa=l(Ye," using the "),Xe=i(Ye,"CODE",{});var Yl=u(Xe);_a=l(Yl,"Easy Create"),Yl.forEach(t),Aa=l(Ye," option, and an Aurora (or a MySQL) engine."),Ye.forEach(t),Ut=d(e),R=i(e,"P",{});var xo=u(R);Da=l(xo,`Make sure you have your username and password - you’ll need this to establish the connection to your database.
If you forget your password, you can reset it by following the steps written `),x=i(xo,"A",{href:!0,rel:!0});var zl=u(x);La=l(zl,"here"),zl.forEach(t),Ra=l(xo,"."),xo.forEach(t),gt=d(e),we=i(e,"P",{});var Gl=u(we);Ze=i(Gl,"EM",{});var Vl=u(Ze);Ca=l(Vl,"RDS Console > Databases > select the instance you want to Modify > New Master Password > Apply Immediately"),Vl.forEach(t),Gl.forEach(t),Ft=d(e),be=i(e,"P",{});var Ul=u(be);qa=l(Ul,"You can find more details about the database on the Configuration tab. These details will come in handy later on."),Ul.forEach(t),Jt=d(e),Se=i(e,"P",{});var gl=u(Se);Ta=l(gl,"To make sure you can access it, check the settings of the security groups and VPC."),gl.forEach(t),Kt=d(e),_e=i(e,"H3",{});var Fl=u(_e);ka=l(Fl,"Create a connection using MySQL Workbench"),Fl.forEach(t),$t=d(e),Ae=i(e,"P",{});var Jl=u(Ae);Ma=l(Jl,"What is MySQL Workbench?"),Jl.forEach(t),Xt=d(e),De=i(e,"BLOCKQUOTE",{});var Kl=u(De);et=i(Kl,"P",{});var $l=u(et);Pa=l($l,"MySQL Workbench is a unified visual tool for database architects, developers, and DBAs. MySQL Workbench provides data modelling, SQL development, and comprehensive administration tools for server configuration, user administration, backup, and much more. (from MySQL)"),$l.forEach(t),Kl.forEach(t),Zt=d(e),Le=i(e,"P",{});var Xl=u(Le);Ia=l(Xl,"In summary, it’s a programme that can help you do operations on your database."),Xl.forEach(t),eo=d(e),C=i(e,"P",{});var Yo=u(C);Na=l(Yo,"It’s free and you can download it "),Y=i(Yo,"A",{href:!0,rel:!0});var Zl=u(Y);Qa=l(Zl,"here"),Zl.forEach(t),Wa=l(Yo,". Their interface was easy enough to navigate through, and you can create tables, insert data in and run queries through the GUI."),Yo.forEach(t),to=d(e),Re=i(e,"P",{});var en=u(Re);Oa=l(en,`First, install the programme. Once installed, set up the connection to the DB.
To do this, fill in the details of the hostname, username, password, and port number. All these can be found on the AWS console (remember the Configuration tab?).`),en.forEach(t),oo=d(e),q=i(e,"P",{});var zo=u(q);ja=l(zo,"Press "),tt=i(zo,"CODE",{});var tn=u(tt);Ba=l(tn,"Test Connection"),tn.forEach(t),Ha=l(zo," to test the connection - if it’s all good you’re all ready to go."),zo.forEach(t),ao=d(e),Ce=i(e,"P",{});var on=u(Ce);xa=l(on,"If it’s being denied, check your security and authorization - it might be that you’ll need to set up an inbound connection on the security group to allow access as mentioned above."),on.forEach(t),so=d(e),qe=i(e,"P",{});var an=u(qe);Ya=l(an,"You can create tables manually through the GUI, or write SQL statements. An example is provided below:"),an.forEach(t),lo=d(e),z=i(e,"PRE",{class:!0});var pr=u(z);pr.forEach(t),no=d(e),Te=i(e,"H3",{});var sn=u(Te);za=l(sn,"Load some data into the database"),sn.forEach(t),ro=d(e),ke=i(e,"P",{});var ln=u(ke);Ga=l(ln,"This is just one way of loading some data into the database - I had a few CSV files."),ln.forEach(t),io=d(e),Me=i(e,"P",{});var nn=u(Me);Va=l(nn,"Here’s the format of the CSV file…"),nn.forEach(t),uo=d(e),G=i(e,"PRE",{class:!0});var hr=u(G);hr.forEach(t),fo=d(e),T=i(e,"P",{});var Go=u(T);Ua=l(Go,"All I had to do was run this command and it would load the data in (replace "),ot=i(Go,"CODE",{});var rn=u(ot);ga=l(rn,"filepath"),rn.forEach(t),Fa=l(Go," with the file path to your file)."),Go.forEach(t),co=d(e),V=i(e,"PRE",{class:!0});var mr=u(V);mr.forEach(t),po=d(e),Pe=i(e,"P",{});var un=u(Pe);Ja=l(un,`It may take a few seconds depending on how much data you’re loading in.
Make sure your DB is connected (or it will complain), and make sure the column names are in the same order as those defined in your table (otherwise, it will assign them in the wrong place). There probably are other more complex SQL statements to control this - so if you’re an SQL expert, you’ll be savvy enough to figure it out. :)`),un.forEach(t),ho=d(e),k=i(e,"P",{});var Vo=u(k);Ka=l(Vo,"Another thing is if you are loading local files on your computer, you’ll need to add the "),at=i(Vo,"CODE",{});var fn=u(at);$a=l(fn,"OPT_LOCAL_INFILE=1"),fn.forEach(t),Xa=l(Vo," option to make sure Workbench locally connects to these files."),Vo.forEach(t),mo=d(e),Ie=i(e,"P",{});var dn=u(Ie);Za=l(dn,"To do this, go back to the page where you set up the database connections > Manage Server Connections > Connection > Advanced."),dn.forEach(t),yo=d(e),Ne=i(e,"P",{});var cn=u(Ne);es=l(cn,"Now you’ve got some data in the database, it’s time to connect it up and access some data through Node.js!"),cn.forEach(t),Eo=d(e),Qe=i(e,"H3",{});var pn=u(Qe);ts=l(pn,"Connecting through Node.js"),pn.forEach(t),vo=d(e),M=i(e,"P",{});var Uo=u(M);os=l(Uo,"You can connect to RDS by establishing a MySQL connection through Node.js. To set up, AWS has some "),U=i(Uo,"A",{href:!0,rel:!0});var hn=u(U);as=l(hn,"instructions"),hn.forEach(t),ss=l(Uo," you can follow."),Uo.forEach(t),wo=d(e),P=i(e,"P",{});var go=u(P);ls=l(go,"Below is a snippet from their tutorial which creates the connection and uses the "),st=i(go,"CODE",{});var mn=u(st);ns=l(mn,"mysql"),mn.forEach(t),rs=l(go," package."),go.forEach(t),bo=d(e),b=i(e,"P",{});var ze=u(b);is=l(ze,"You can install this by running "),lt=i(ze,"CODE",{});var yn=u(lt);us=l(yn,"npm install mysql"),yn.forEach(t),fs=l(ze," and using a local "),nt=i(ze,"CODE",{});var En=u(nt);ds=l(En,".env"),En.forEach(t),cs=l(ze," file to store the hostname, username, password, port number and database name."),ze.forEach(t),So=d(e),y=i(e,"P",{});var W=u(y);ps=l(W,"The "),rt=i(W,"CODE",{});var vn=u(rt);hs=l(vn,"dotenv"),vn.forEach(t),ms=l(W," package allows you to access environment variables from a local "),it=i(W,"CODE",{});var wn=u(it);ys=l(wn,".env"),wn.forEach(t),Es=l(W," file. You will need to install this as well to use it via "),ut=i(W,"CODE",{});var bn=u(ut);vs=l(bn,"npm install dotenv"),bn.forEach(t),ws=l(W,"."),W.forEach(t),_o=d(e),I=i(e,"P",{});var Fo=u(I);bs=l(Fo,"Your "),ft=i(Fo,"CODE",{});var Sn=u(ft);Ss=l(Sn,".env"),Sn.forEach(t),_s=l(Fo," file:"),Fo.forEach(t),Ao=d(e),g=i(e,"PRE",{class:!0});var yr=u(g);yr.forEach(t),Do=d(e),D=i(e,"P",{});var Pt=u(D);dt=i(Pt,"STRONG",{});var _n=u(dt);As=l(_n,"WARNING:"),_n.forEach(t),Ds=l(Pt," NEVER EVER EVER COMMIT THIS TO GIT as it contains sensitive information! Remember to check this is in the "),ct=i(Pt,"CODE",{});var An=u(ct);Ls=l(An,".gitignore"),An.forEach(t),Rs=l(Pt," file if you are using git or any VCS. There are other secure ways of doing this (such as going through an IAM role)."),Pt.forEach(t),Lo=d(e),We=i(e,"P",{});var Dn=u(We);Cs=l(Dn,"To be able to query, you’ll need to make sure you define the database name as well (otherwise you’ll get a database error)."),Dn.forEach(t),Ro=d(e),S=i(e,"P",{});var Ge=u(S);qs=l(Ge,"Note if you did not set up a database name (or in the RDS console, the name is "),pt=i(Ge,"CODE",{});var Ln=u(pt);Ts=l(Ln,"-"),Ln.forEach(t),ks=l(Ge,"), the name is likely to be "),ht=i(Ge,"CODE",{});var Rn=u(ht);Ms=l(Rn,"sys"),Rn.forEach(t),Ps=l(Ge," or the parent of the tables when you view the database and its attributes in MySQL Workbench."),Ge.forEach(t),Co=d(e),Oe=i(e,"P",{});var Cn=u(Oe);Is=l(Cn,"Node.js file connecting to RDS:"),Cn.forEach(t),qo=d(e),F=i(e,"PRE",{class:!0});var Er=u(F);Er.forEach(t),To=d(e),N=i(e,"P",{});var Jo=u(N);Ns=l(Jo,"The "),mt=i(Jo,"CODE",{});var qn=u(mt);Qs=l(qn,"testConnection"),qn.forEach(t),Ws=l(Jo," function should be able to run and if it prints out the success message, it means you’ve connected!"),Jo.forEach(t),ko=d(e),_=i(e,"P",{});var Ve=u(_);Os=l(Ve,"To query, there are a few gotchas - the "),yt=i(Ve,"CODE",{});var Tn=u(yt);js=l(Tn,"mysql"),Tn.forEach(t),Bs=l(Ve," package will need a few additional tweaks if you need to store your query results in a variable and do further transformations. There’s a very good doc about all the different ways and how to handle the "),J=i(Ve,"A",{href:!0,rel:!0});var kn=u(J);Hs=l(kn,"promises here"),kn.forEach(t),xs=l(Ve," and the explanation behind each one."),Ve.forEach(t),Mo=d(e),A=i(e,"P",{});var Ue=u(A);Ys=l(Ue,"I prefer using "),Et=i(Ue,"CODE",{});var Mn=u(Et);zs=l(Mn,"await / async"),Mn.forEach(t),Gs=l(Ue," when handling promises. In short, we are changing "),vt=i(Ue,"CODE",{});var Pn=u(vt);Vs=l(Pn,"connection.query"),Pn.forEach(t),Us=l(Ue," to return a promise response so we can capture it and do further transformations if needed."),Ue.forEach(t),Po=d(e),K=i(e,"PRE",{class:!0});var vr=u(K);vr.forEach(t),Io=d(e),$=i(e,"P",{});var _l=u($);wt=i(_l,"STRONG",{});var In=u(wt);gs=l(In,"NOTE:"),In.forEach(t),Fs=l(_l," If you need to pass arguments down to the SQL statement, do prepare them. Do NOT just insert the variables in."),_l.forEach(t),No=d(e),E=i(e,"P",{});var O=u(E);Js=l(O,"Incorrect / or prone to error (the reason is if "),bt=i(O,"CODE",{});var Nn=u(bt);Ks=l(Nn,"id"),Nn.forEach(t),$s=l(O," is another "),St=i(O,"CODE",{});var Qn=u(St);Xs=l(Qn,"SELECT"),Qn.forEach(t),Zs=l(O," / "),_t=i(O,"CODE",{});var Wn=u(_t);el=l(Wn,"UPDATE"),Wn.forEach(t),tl=l(O," statement, you could end up introducing unintended side effects / running other queries to the database that you do not want happening!):"),O.forEach(t),Qo=d(e),X=i(e,"PRE",{class:!0});var wr=u(X);wr.forEach(t),Wo=d(e),je=i(e,"P",{});var On=u(je);ol=l(On,"Recommended (is to pass the arguments through / “prepare” the statement):"),On.forEach(t),Oo=d(e),Z=i(e,"PRE",{class:!0});var br=u(Z);br.forEach(t),jo=d(e),Be=i(e,"P",{});var jn=u(Be);al=l(jn,"And that’s it! Hopefully, you can start accessing your RDS DB through Node.js!"),jn.forEach(t),Bo=d(e),He=i(e,"H2",{});var Bn=u(He);sl=l(Bn,"References / Helpful resources"),Bn.forEach(t),Ho=d(e),p=i(e,"UL",{});var h=u(p);At=i(h,"LI",{});var Hn=u(At);ee=i(Hn,"A",{href:!0,rel:!0});var xn=u(ee);ll=l(xn,"RDS - AWS"),xn.forEach(t),Hn.forEach(t),nl=d(h),Dt=i(h,"LI",{});var Yn=u(Dt);te=i(Yn,"A",{href:!0,rel:!0});var zn=u(te);rl=l(zn,"Pros and cons of RDS - Sara’s Analytics"),zn.forEach(t),Yn.forEach(t),il=d(h),Lt=i(h,"LI",{});var Gn=u(Lt);oe=i(Gn,"A",{href:!0,rel:!0});var Vn=u(oe);ul=l(Vn,"Creating a MySQL DB instance and connecting to a database on a MySQL DB instance - AWS"),Vn.forEach(t),Gn.forEach(t),fl=d(h),Rt=i(h,"LI",{});var Un=u(Rt);ae=i(Un,"A",{href:!0,rel:!0});var gn=u(ae);dl=l(gn,"Reset RDS master password - AWS"),gn.forEach(t),Un.forEach(t),cl=d(h),Ct=i(h,"LI",{});var Fn=u(Ct);se=i(Fn,"A",{href:!0,rel:!0});var Jn=u(se);pl=l(Jn,"MySQL Workbench - MySQL"),Jn.forEach(t),Fn.forEach(t),hl=d(h),qt=i(h,"LI",{});var Kn=u(qt);le=i(Kn,"A",{href:!0,rel:!0});var $n=u(le);ml=l($n,"Executing a MySQL query in Node.js - Evert Pot"),$n.forEach(t),Kn.forEach(t),yl=d(h),Tt=i(h,"LI",{});var Xn=u(Tt);ne=i(Xn,"A",{href:!0,rel:!0});var Zn=u(ne);El=l(Zn,"Adding an Amazon RDS DB instance to your Node.js application environment - AWS"),Zn.forEach(t),Xn.forEach(t),vl=d(h),kt=i(h,"LI",{});var er=u(kt);re=i(er,"A",{href:!0,rel:!0});var tr=u(re);wl=l(tr,"Node.js, MySQL and async/await - Michal Mecinski"),tr.forEach(t),er.forEach(t),bl=d(h),Mt=i(h,"LI",{});var or=u(Mt);ie=i(or,"A",{href:!0,rel:!0});var ar=u(ie);Sl=l(ar,"Using AWS RDS with Node.js and Express.js tutorial - Stack Abuse"),ar.forEach(t),or.forEach(t),h.forEach(t),this.h()},h(){c(j,"href","https://sarasanalytics.com/blog/amazon-rds-pros-and-cons"),c(j,"rel","nofollow"),c(B,"href","https://aws.amazon.com/rds/"),c(B,"rel","nofollow"),c(H,"href","https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.MySQL.html"),c(H,"rel","nofollow"),c(x,"href","https://aws.amazon.com/premiumsupport/knowledge-center/reset-master-user-password-rds/"),c(x,"rel","nofollow"),c(Y,"href","https://www.mysql.com/products/workbench/"),c(Y,"rel","nofollow"),c(z,"class","language-undefined"),c(G,"class","language-undefined"),c(V,"class","language-undefined"),c(U,"href","https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-nodejs.rds.html"),c(U,"rel","nofollow"),c(g,"class","language-undefined"),c(F,"class","language-undefined"),c(J,"href","https://codeburst.io/node-js-mysql-and-async-await-6fb25b01b628"),c(J,"rel","nofollow"),c(K,"class","language-undefined"),c(X,"class","language-undefined"),c(Z,"class","language-undefined"),c(ee,"href","https://aws.amazon.com/rds/"),c(ee,"rel","nofollow"),c(te,"href","https://sarasanalytics.com/blog/amazon-rds-pros-and-cons"),c(te,"rel","nofollow"),c(oe,"href","https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.MySQL.html"),c(oe,"rel","nofollow"),c(ae,"href","https://aws.amazon.com/premiumsupport/knowledge-center/reset-master-user-password-rds/"),c(ae,"rel","nofollow"),c(se,"href","https://www.mysql.com/products/workbench/"),c(se,"rel","nofollow"),c(le,"href","https://evertpot.com/executing-a-mysql-query-in-nodejs/"),c(le,"rel","nofollow"),c(ne,"href","https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-nodejs.rds.html"),c(ne,"rel","nofollow"),c(re,"href","https://codeburst.io/node-js-mysql-and-async-await-6fb25b01b628"),c(re,"rel","nofollow"),c(ie,"href","https://stackabuse.com/using-aws-rds-with-node-js-and-express-js/"),c(ie,"rel","nofollow")},m(e,a){n(e,L,a),o(L,Ko),n(e,It,a),n(e,ue,a),o(ue,$o),n(e,Nt,a),n(e,fe,a),o(fe,Xo),n(e,Qt,a),n(e,de,a),o(de,Zo),n(e,Wt,a),n(e,ce,a),o(ce,ea),n(e,Ot,a),n(e,pe,a),o(pe,ta),n(e,jt,a),n(e,v,a),o(v,oa),o(v,j),o(j,aa),o(v,sa),o(v,B),o(B,la),o(v,na),n(e,Bt,a),n(e,he,a),o(he,ra),n(e,Ht,a),n(e,me,a),o(me,ia),n(e,xt,a),n(e,ye,a),o(ye,ua),n(e,Yt,a),n(e,Ee,a),o(Ee,ge),o(ge,fa),n(e,zt,a),n(e,m,a),o(m,Fe),o(Fe,da),o(m,ca),o(m,Je),o(Je,pa),o(m,ha),o(m,Ke),o(Ke,ma),o(m,ya),o(m,$e),o($e,Ea),n(e,Gt,a),n(e,ve,a),o(ve,va),n(e,Vt,a),n(e,w,a),o(w,wa),o(w,H),o(H,ba),o(w,Sa),o(w,Xe),o(Xe,_a),o(w,Aa),n(e,Ut,a),n(e,R,a),o(R,Da),o(R,x),o(x,La),o(R,Ra),n(e,gt,a),n(e,we,a),o(we,Ze),o(Ze,Ca),n(e,Ft,a),n(e,be,a),o(be,qa),n(e,Jt,a),n(e,Se,a),o(Se,Ta),n(e,Kt,a),n(e,_e,a),o(_e,ka),n(e,$t,a),n(e,Ae,a),o(Ae,Ma),n(e,Xt,a),n(e,De,a),o(De,et),o(et,Pa),n(e,Zt,a),n(e,Le,a),o(Le,Ia),n(e,eo,a),n(e,C,a),o(C,Na),o(C,Y),o(Y,Qa),o(C,Wa),n(e,to,a),n(e,Re,a),o(Re,Oa),n(e,oo,a),n(e,q,a),o(q,ja),o(q,tt),o(tt,Ba),o(q,Ha),n(e,ao,a),n(e,Ce,a),o(Ce,xa),n(e,so,a),n(e,qe,a),o(qe,Ya),n(e,lo,a),n(e,z,a),z.innerHTML=lr,n(e,no,a),n(e,Te,a),o(Te,za),n(e,ro,a),n(e,ke,a),o(ke,Ga),n(e,io,a),n(e,Me,a),o(Me,Va),n(e,uo,a),n(e,G,a),G.innerHTML=nr,n(e,fo,a),n(e,T,a),o(T,Ua),o(T,ot),o(ot,ga),o(T,Fa),n(e,co,a),n(e,V,a),V.innerHTML=rr,n(e,po,a),n(e,Pe,a),o(Pe,Ja),n(e,ho,a),n(e,k,a),o(k,Ka),o(k,at),o(at,$a),o(k,Xa),n(e,mo,a),n(e,Ie,a),o(Ie,Za),n(e,yo,a),n(e,Ne,a),o(Ne,es),n(e,Eo,a),n(e,Qe,a),o(Qe,ts),n(e,vo,a),n(e,M,a),o(M,os),o(M,U),o(U,as),o(M,ss),n(e,wo,a),n(e,P,a),o(P,ls),o(P,st),o(st,ns),o(P,rs),n(e,bo,a),n(e,b,a),o(b,is),o(b,lt),o(lt,us),o(b,fs),o(b,nt),o(nt,ds),o(b,cs),n(e,So,a),n(e,y,a),o(y,ps),o(y,rt),o(rt,hs),o(y,ms),o(y,it),o(it,ys),o(y,Es),o(y,ut),o(ut,vs),o(y,ws),n(e,_o,a),n(e,I,a),o(I,bs),o(I,ft),o(ft,Ss),o(I,_s),n(e,Ao,a),n(e,g,a),g.innerHTML=ir,n(e,Do,a),n(e,D,a),o(D,dt),o(dt,As),o(D,Ds),o(D,ct),o(ct,Ls),o(D,Rs),n(e,Lo,a),n(e,We,a),o(We,Cs),n(e,Ro,a),n(e,S,a),o(S,qs),o(S,pt),o(pt,Ts),o(S,ks),o(S,ht),o(ht,Ms),o(S,Ps),n(e,Co,a),n(e,Oe,a),o(Oe,Is),n(e,qo,a),n(e,F,a),F.innerHTML=ur,n(e,To,a),n(e,N,a),o(N,Ns),o(N,mt),o(mt,Qs),o(N,Ws),n(e,ko,a),n(e,_,a),o(_,Os),o(_,yt),o(yt,js),o(_,Bs),o(_,J),o(J,Hs),o(_,xs),n(e,Mo,a),n(e,A,a),o(A,Ys),o(A,Et),o(Et,zs),o(A,Gs),o(A,vt),o(vt,Vs),o(A,Us),n(e,Po,a),n(e,K,a),K.innerHTML=fr,n(e,Io,a),n(e,$,a),o($,wt),o(wt,gs),o($,Fs),n(e,No,a),n(e,E,a),o(E,Js),o(E,bt),o(bt,Ks),o(E,$s),o(E,St),o(St,Xs),o(E,Zs),o(E,_t),o(_t,el),o(E,tl),n(e,Qo,a),n(e,X,a),X.innerHTML=dr,n(e,Wo,a),n(e,je,a),o(je,ol),n(e,Oo,a),n(e,Z,a),Z.innerHTML=cr,n(e,jo,a),n(e,Be,a),o(Be,al),n(e,Bo,a),n(e,He,a),o(He,sl),n(e,Ho,a),n(e,p,a),o(p,At),o(At,ee),o(ee,ll),o(p,nl),o(p,Dt),o(Dt,te),o(te,rl),o(p,il),o(p,Lt),o(Lt,oe),o(oe,ul),o(p,fl),o(p,Rt),o(Rt,ae),o(ae,dl),o(p,cl),o(p,Ct),o(Ct,se),o(se,pl),o(p,hl),o(p,qt),o(qt,le),o(le,ml),o(p,yl),o(p,Tt),o(Tt,ne),o(ne,El),o(p,vl),o(p,kt),o(kt,re),o(re,wl),o(p,bl),o(p,Mt),o(Mt,ie),o(ie,Sl)},p:Al,i:Al,o:Al,d(e){e&&t(L),e&&t(It),e&&t(ue),e&&t(Nt),e&&t(fe),e&&t(Qt),e&&t(de),e&&t(Wt),e&&t(ce),e&&t(Ot),e&&t(pe),e&&t(jt),e&&t(v),e&&t(Bt),e&&t(he),e&&t(Ht),e&&t(me),e&&t(xt),e&&t(ye),e&&t(Yt),e&&t(Ee),e&&t(zt),e&&t(m),e&&t(Gt),e&&t(ve),e&&t(Vt),e&&t(w),e&&t(Ut),e&&t(R),e&&t(gt),e&&t(we),e&&t(Ft),e&&t(be),e&&t(Jt),e&&t(Se),e&&t(Kt),e&&t(_e),e&&t($t),e&&t(Ae),e&&t(Xt),e&&t(De),e&&t(Zt),e&&t(Le),e&&t(eo),e&&t(C),e&&t(to),e&&t(Re),e&&t(oo),e&&t(q),e&&t(ao),e&&t(Ce),e&&t(so),e&&t(qe),e&&t(lo),e&&t(z),e&&t(no),e&&t(Te),e&&t(ro),e&&t(ke),e&&t(io),e&&t(Me),e&&t(uo),e&&t(G),e&&t(fo),e&&t(T),e&&t(co),e&&t(V),e&&t(po),e&&t(Pe),e&&t(ho),e&&t(k),e&&t(mo),e&&t(Ie),e&&t(yo),e&&t(Ne),e&&t(Eo),e&&t(Qe),e&&t(vo),e&&t(M),e&&t(wo),e&&t(P),e&&t(bo),e&&t(b),e&&t(So),e&&t(y),e&&t(_o),e&&t(I),e&&t(Ao),e&&t(g),e&&t(Do),e&&t(D),e&&t(Lo),e&&t(We),e&&t(Ro),e&&t(S),e&&t(Co),e&&t(Oe),e&&t(qo),e&&t(F),e&&t(To),e&&t(N),e&&t(ko),e&&t(_),e&&t(Mo),e&&t(A),e&&t(Po),e&&t(K),e&&t(Io),e&&t($),e&&t(No),e&&t(E),e&&t(Qo),e&&t(X),e&&t(Wo),e&&t(je),e&&t(Oo),e&&t(Z),e&&t(jo),e&&t(Be),e&&t(Bo),e&&t(He),e&&t(Ho),e&&t(p)}}}const Rr={title:"Connecting up to AWS RDS with MySQL and Node.js",date:"2021-05-23 20:00:00 +1300"};class Cr extends Sr{constructor(L){super(),_r(this,L,null,Dr,Ar,{})}}export{Cr as default,Rr as metadata};
